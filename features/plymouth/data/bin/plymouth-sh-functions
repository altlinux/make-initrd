#!/bin/sh

if [ -z "${__plymouth_sh_functions-}" ]; then
__plymouth_sh_functions=1

run_plymouth() {
	[ -z "$NOSPLASH" ] || return 0

	local pid=/run/plymouth/pid

	mkdir -m 0755 /run/plymouth
	: > /run/systemd/plymouth

	/sbin/plymouthd --pid-file $pid --tty=/dev/tty1
	udevadm settle
	/bin/plymouth --show-splash

	[ ! -f "$pid" ] || omit_pid "$(cat "$pid")"
}

fi
